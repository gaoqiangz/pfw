pfw/PowerFramework/PowerUI QQ技术交流群:303560219
by gaoqiangz@msn.com
---------------------
1.2.3.659(2018-04-09)
[新增]
1.[pfw.ui.sciter]
n_sciter::ClosePopup函数增加无参数重载版本
2.[pfw.ui.sciter]
n_sciter加载的页面[view]对象增加closePopup([exitCode])函数，用于退出Popup模式
3.[pfw]
增加w_test_sciter_dropdowncalendar示例
[修复]
1.[pfw.ui.sciter]
修复n_sciter::GetMinWidth/GetMinHeight始终返回0的问题
---------------------

1.2.3.654(2018-04-08)
[修复]
1.[pfw.ui]
修复IconFont协议指定[color]参数无效的BUG
2.[pfw.utils.zip]
修复n_unzip::UnzipFile/UnzipFolder参数为index时解压可能失败的问题
3.[pfw.ui.controls]
修复任务栏不在底部时窗口最大化座标不正确的问题（Win10）
---------------------

1.2.3.650(2018-04-04)
[新增]
1.[pfw.datawindow.services]
n_cst_dwsvc_columnexp增加of_SetCacheable函数，开启表达示缓存以提高性能
2.[pfw.thread.ext]
n_cst_threading_task_sqlquery增加#PageCounting属性和of_SetPageCounting函数用于设置分页计算的开关（默认开启，只有开启之后才能获取of_GetPageCount/of_GetRecordCount）
3.[pfw.net.http]
n_httputility::UrlEncode/UrlDecode支持更多编码
4.[pfw.net.http]
GetDataString/GetDataJSON/GetDataXML增加encoding参数重载
5.[pfw.thread]
增加of_GetID函数获取工作线程的ID（原of_GetID更名为of_GetSID）
[调整]
1.[pft.net.http]
不再转义URL字符，由用户转义
[修复]
1.[pfw]
修复资源加载zip[path]方式带中文名称时可能会失败的问题
2.[pfw.utility.zip]
ZipCompress/ZipUncompress字符串压缩不同平台交换数据时中文可能出现乱码的问题（之前版本压缩的字符串如果带中文可能出现乱码，需要重新压缩）
3.[pfw]
修复在某些控件上使用鼠标滚动时可能会陷入死循环的问题（如某些OLE控件）
4.[pfw.ui.sciter.ext]
u_cst_sciter_treeview选择option时不滚动到视图的问题
5.[pfw.ui.controls]
修复u_cst_tabcontrol浮动窗口第二次显示时页面大小计算不正确的问题
6.[pfw.ui.controls]
修复任务栏不在底部时窗口最大化座标不正确的问题
---------------------

1.2.2.598(2018-03-14)
[新增]
1.[pfw]
支持PB相对路径资源编译后从EXE加载（兼容PB原来的资源使用方式）
2.[pfw.utility.barcode]
增加EANX_CHK,UPCA_CHK,UPCE_CHK条码类型
3.[pfw.datawindow.services]
n_cst_dwsvc_columnsort多列排序时显示顺序号
4.[pfw.crypto]
n_crypto增加支持blob类型的key和iv参数
5.[pfw.utility]
n_filescanner遍历文件和目录（见pfw.pbl::w_test_filescanner）
6.[pfw.utility.devinfo]
n_devinfo增加获取本机IP地址的功能（见pfw.pbl::w_test_devinfo）
7.[pfw.net.http]
n_httpclient::UploadFile增加params参数（针对MultiPart方式，格式为json:{"name":"name","filename":"filename"}）
[调整]
1.重命令PBL
[完善]
1.[pfw.datawindow.services]
n_cst_dwsvc_columnexp改进自动关联列和展开变量的算法
[修复]
1.[pfw.utility.barcode]
修复部分类型的条码旋转显示不正确的问题
2.[pfw.ui.controls]
修复s_cst_datawindow Border=false时不显示标题栏的问题
3.[pfw]
修复sciter.dll依赖问题（没使用Sciter控件时不需要附带该dll和pbl）
4.[pfw]
修复从EXE加载资源时可能会失败的问题（pbr协议）
5.[pfw.utility]
修复Sprintf参数对齐符号解析的BUG
6.[pfw.demos]
修复n_cst_sciter_traynotification换行符显示的问题
---------------------

1.2.1.455(2018-01-22)
[新增]
1.[pfwUI](!!!)
增加对支持svg和icon-font的支持（见pfw.pbl::w_test_svg/w_test_iconfont）
2.[对象,pfwBarcode]
增加n_barcode对象，支持各种一维码（见pfw.pbl::w_test_barcode）
3.[对象,pfwBarcode]
增加n_qrcode对象，专门为QR二维码优化（见pfw.pbl::w_test_qrcode）
4.[风格,pfwUIControls]
n_cst_tabcontrol_theme增加TBS_OFFICE2013风格
5.[对象,pfwDemos]
增加n_cst_sciter_traynotification托盘提示示例（见pfwDemos.pbl::w_main）
[修复]
1.[pfwThread]
修复由1.2.0.1211版本带来的线程任务结束时的同步信号的BUG
2.[pfwUtils]
修复n_logger::ConnectToConsole可能会失败的问题
3.[pfwUtils]
修复n_logger可能会造成异常的问题
4.[pfwUIControls]
修复AnimatedImage只有一帧时导致布局计算错误的问题
5.[pfwUIControls]
修复部分控件OnPreConstructor事件执行两次的问题
---------------------

1.2.0.1214(2017-12-14)
[新增]
1.[事件,pfwUIControls]
u_cst_tabpage/u_cst_tabpagew增加OnGetFloatMinSize事件，用于设置浮动窗口的最小大小
[修复]
1.[pfwUIControls]
修复u_cst_tabcontrol标签浮动后再停靠回去之后，当主窗口最小化再还原时标签窗口也显示出来的问题
2.[pfwThread]
修复由1.2.0.1211版本带来的线程释放的BUG
---------------------

1.2.0.1211(2017-12-11)
[优化]
1.[pfwDWServices]
n_cst_dwsvc_columnsort增加对compute列的支持，同时优化了箭头符号
[修复]
1.[pfw]
修复XP兼容性问题（报GetThreadID无法定位到函数）
2.[pfwHttp]
修复httpclient发送xml对象时使用了json的content-type导致的错误
3.[pfwDWServices]
修复n_cst_dwsvc_columnsort排序不正确的BUG
---------------------

1.2.0.1204(2017-12-04)
[新增]
1.[特性,pfwSciter](!!!)
PB与Sciter传值采用any，无缝与tiscript交互（不再要求使用n_scitervalue封装PB值，由PFW自动匹配相应的tis值，同时兼容n_scitervalue传值）
*升级到该版本可能会遇到兼容问题，代码改动量小
2.[特性,pfwHttp]
n_httpclient增加数据传输回调事件OnTransData（返回1取消传输），由Request/DownloadFile/UploadFile函数的[transcallback]开启
3.[控件,pfwUIControls]
增加标准控件s_cst_statictext
4.[对象,pfwSciter]
增加n_scitervm对象，用于加载执行tis脚本
5.[函数,pfwSciterExt]
n_cst_sciter_treeview_option增加of_FindChildByTag/of_GetChildren函数
6.[函数,pfwParser]
n_json增加IsObject/IsArray/MakeObject/MakeArray/RemoveAll函数
7.[函数,pfwSciter]
n_scitervalue增加IsObject/IsArray/MakeObject/MakeArray/RemoveAll函数
8.[函数,pfwHttp]
n_httpclient增加DownloadFile/UploadFile函数
9.[函数,pfwRegExp]
n_regexp增加Verify函数用于校验正则表达示，同时增加RegExpVerify全局函数
[调整]
1.[特性,pfwUIControls]
u_cst_tabcontrol.of_Dock函数不再销毁浮动窗口，只有标签被移除时才销毁，避免某些特定情况下销毁浮动窗口引起的异常
[优化]
1.[控件,pfwUIControlsExt]
1.MessageBoxEx优化窗口大小限制
[修复]
1.[pfwZip]
修复解压加密的zip文件时卡死的问题
2.[pfwDWServices]
修复DDSGetPYFirstLetter中英混合取值不正确的BUG
3.[pfwUtils]
改善由PBVM的BUG导致调用n_logger变参函数时可能会异常的问题
4.[pfwInvoker]
改善由PBVM的BUG导致调用n_objectinvoker变参函数时可能会异常的问题
5.[pfwUIControls]
s_cst_window popup/child风格的窗口最小化后系统菜单显示问题
6.[pfw]
修复GetSysColor参数为负时崩溃的错误
7.[pfwThreadExt]
修复n_cst_threading_task_sqlquery可能会丢失filter缓冲区数据的问题
8.[pfwUIControls]
u_cst_splitcontainer为附加定位模式(#AttachMode=true)时的位置刷新问题
---------------------

1.1.1.0911(2017-09-11)
[新增]
1.[函数,pfwSciter]
n_sciterelement增加DetachObject函数，用于解除元素与PB控件的绑定
2.[函数,pfwSciter]
TIS中增加U2PX/U2PY/P2DX/P2DY/D2UX/D2UY/U2DX/U2DY全局函数
[优化]
1.[pfwThread]
优化线程释放
[修复]
1.[pfwHttp]
修复httpclient::SetValidateHost(false)失效
2.[pfwDWServices]
修复n_cst_dwsvc_contextmenu复制列的数据时如果最后一行为空时会少一行
3.[pfwDWServices]
修复n_cst_dwsvc_contextmenu复制单元格右键菜单检测的逻辑并且支持复制计算列的内容
4.[pfwSciterExt]
u_cst_sciter_treeview在DPI为125%的屏幕上显示checkbox不正常
---------------------

1.1.0.0904(2017-09-04)
[新增]
1.[特性,pfwUI](!!!)
支持高分屏(High DPI),从这个版本开始,pfw的所有UI单位都由px改为dip
DIP:设备无关像素,在DPI为96的屏幕上1dip等于1px,DPI为192的屏幕上1dip等于2px
*升级到该版本可能会遇到兼容问题，代码改动量小
2.[特性,pfwUI]
增加资源协议data:[resType,]base64,从base64字符串加载资源,并且所有的资源协议都支持zip[path]
3.[特性,pfwSciter]
TIS可以直接传递Element对象到PB的n_sciterelement对象
4.[特性,pfwUI]
增加对I18N(国际化多语言)功能的支持
5.[对象,pfwDWServices]
增加一些DW服务:右键菜单服务/行选服务/排序服务/下拉检索服务/列表达示服务(见pfw.pbl::w_cst_dwsvc_xxx)
6.[函数,pfwUI]
增加与高分屏特性相配合的一些函数:U2PX/U2PY/P2DX/P2DY/D2UX/D2UY/U2DX/U2DY/EnableDPIAware
7.[函数,pfwUIControls]
s_cst_window增加wf_ChangeMenu函数
8.[函数,pfwUIObjects]
n_cst_window_theme增加#TitleBar属性和of_SetTitleBar函数,用于控制窗口标题栏显示/隐藏
9.[函数,pfwThreadExt]
n_cst_threading_task_sqlquery增加of_AddParam函数用于添加绑定名称的参数
10.[函数,pfwThreadExt]
n_cst_threading_task_sqlquery增加of_SetMaxRows函数用于设置最大行数(当达到该行数时会发起NCD_MAXROWS通知,返回1允许继续查询,否则会报OUT_OF_RANGE错误)
11.[函数,pfwHttpExt]
n_cst_alipay增加of_Precreate/of_PrecreateAsync接口：统一收单线下交易预创建
n_cst_wxpay增加of_UnifiedOrder/of_UnifiedOrderAsync接口：统一下单
n_cst_wxpay增加of_CloseOrder/of_CloseOrderAsync接口：关闭订单
[调整]
1.[pfwHttpExt]
该pfwDemos.pbl内的n_cst_alipay/n_cst_wxpay两个支付对象移至此PBL中
[修复]
1.[pfwParser]
修复n_xmldoc::RemoveChildren只能移除第一个子节点的BUG
2.[pfwUIControlExt]
修复一些与MessageBoxEx/MessageBoxTimout有关的BUG
3.[功能,pfwThreadExt]
n_cst_threading_task_sqlquery修复DW中同一个参数多处使用报绑定参数失败的错误
4.[pfwHttpExt]
n_cst_wxpay修复金额错误的问题
5.[pfwControls]
修复窗口上按钮快捷键失效的问题
6.[pfw](!!!)
修复几处pfw.dll内存访问错误
---------------------

1.0.2.0517(2017-05-17)
[新增]
1.[示例]
增加GOOGLE静态地图DEMO(见:pfw.pbl::w_test_static_map)
1.[特性]
鼠标在只有水平滚动条而没有垂直滚动条的控件上垂直滚动时会转换为水平滚动消息(不支持DataWindow的HSplit属性) [实验]
[修复]
1.[pfw]
XP/2003崩溃的问题
---------------------

1.0.1.0509(2017-05-09)
-pfw发布的第一个版本,以下是相对于PowerUI的改变:
[新增]
1.[特性,pfwSciter]
支持在TIS脚本里直接使用PB对象和函数等,无缝交互
2.[特性,pfwHttp]
httpclient支持服务端压缩的响应数据Content-Encoding:gzip/deflate
示例:httpClient.SetHeader("Accept-Encoding","gzip")
3.[对象,pfwWebSocket]
n_wsclient/n_wsmessage,WebSocket客户端网络库,支持WS/WSS协议,接口可参考HttpClient
4.[对象,pfwRegExp]
n_regexp,正则表达示库,支持匹配、查找和替换
5.[对象,pfwZip]
n_zip/n_unzip,Zip压缩算法库,操作zip文件等
6.[对象,pfwDevInfo]
设备指纹获取库n_devinfo,支持获取CPUID,硬盘序列号,MAC地址等
7.[对象,pfwInvoker]
PB对象动态调用库n_objectinvokder/n_scriptinvoker,支持动态调用对象函数、事件,获取对象实例、静态变量(共享变量)等
8.[对象,pfwCompiler]
PB动态编译PowerScript库,可以运行时导入全局函数或对象等等
9.[对象,pfwThread]
n_cst_thread/n_cst_thread_task/n_cst_threading/n_cst_threading_task/n_cst_threading_pool,PB多线程库(包括线程池对象)
10.[对象,pfwThreadExt]
n_cst_threading_task_sqlcommand/n_cst_threading_task_sqlquery/n_cst_threading_sqlupdate,基于pfw线程库实现的数据库通用查询和更新任务,支持分页查询,动态绑定参数,动态SQL,多表更新等.
11.[对象,pfwSciter]
w_cst_sciter,PB窗口类型的Sciter
12.[对象,pfwUtils]
n_logger日志记录对象,支持文件和控制台输出,可以输出格式化字符串,类似C#的Console.Write,支持参数索引和对齐({index[,alignment][:format]})
13.[函数,pfwInvoker]
HasGlobalFunction/InvokeGlobalFunction/HasGlobalVar/GetGlobalVar/SetGlobalVar函数,用于动态调用全局函数,获取全局变量等
14.[函数,pfwCompiler]
Evaluate动态解析并执行PowerScript,支持定义参数列表和传入任意参数到函数体
15.[函数,pfwRegExp]
RegExpMatch/RegExpFind/RegExpReplace函数(封装调用n_regexp)
16.[函数,pfwZip]
ZipCompress/ZipUncompress函数,字符串压缩,blob压缩
17.[函数,pfwUtils]
进制转换全局函数,DecToHex/HexToDec十进制与十六进制互转,DecToString/StringToDec十进制与任意2~36进制互转
18.[函数,pfwUtils]
LoadUri,从pfw资源协议加载数据
19.[函数,pfwUIControls]
u_cst_tabpage/s_cst_tabpagew增加函数of_GetTabIndex/of_GetTabText/of_GetTabTag/of_GetTabData/of_IsTabSelected/of_IsTabFloated/of_SelectTab/of_ShowTabFloatWindow/of_CloseTab
20.[函数,pfwUIControls]
s_cst_singlelineedit/s_cst_multilineedit/s_cst_editmask增加of_GetText函数
21.[函数,pfwContainer]
n_map增加Get(index)/GetKey(index)函数
22.[函数,pfwParser]
n_json增加Find函数(Find("key/key2/key3[/..]"))
23.[函数,pfwSciter]
n_sciterelement增加GetData/SetData函数用于绑定任意PB变量
24.[函数,pfwSciter]
n_sciterelement增加GetExpando函数用于获取Element的TIS扩展对象
25.[函数,pfwSciter]
n_scitervalue增加GetValueObject/SetValue(powerboject)/GetItemObject/SetItem(powerobject)函数,可以将PB对象传入TIS
26.[函数,pfwSciter]
u_sciter/n_sciter/w_cst_sciter增加SetDebugOutput函数和OnDebugOutput事件,用于输出调试信息
27.[函数,pfwSciter]
n_sciter增加Popup/ClosePopup函数,用于模拟弹出菜单的方式显示Sciter窗口
28.[函数,pfwUIObjects]
n_cst_sciter_treeview_option增加of_GetData/of_SetData函数用于绑定任意PB变量
29.[函数,pfwCrypto]
n_crypto::SymEncrypt/SymDecrypt提供参数初始化IV
30.[函数,pfwUtils]
BitTest函数(等于BitAND(num,bits)=bits),BitClear函数(等于BitAND(num,BitNOT(bits)))
31.[函数,pfwUtils]
Sprintf函数,用于输出格式化字符串,类似C#的Console.Write,支持参数索引和对齐({index[,alignment][:format]})
32.[函数,pfwUtils]
DateTimeToTimestamp/TimestampToDateTime用于PB日期和时间戳之间转换(精度为秒),支持UTC和本地时间(默认为UTC)
33.[函数,pfwCrypto]
Base64Encode/Base64Decode/GUID/MD5/RandomString/SHA1/SHA256函数(封装调用n_crypto)
34.[函数,pfwHttp]
SetCA/GetCA设置服务端证书的签发证书,用于验证服务端证书
35.[函数,pfwHttp]
SetValidateHost/IsValidateHost设置服务端证书域名验证开关(ValidateServer开启时有效)
36.[函数,pfwHttp]
n_httpclient增加SetAcceptException/IsAcceptException函数用于开启接收HTTP异常状态信息的功能(默认只接收HTTP OK的信息)
37.[函数,pfwHttp]
CancelAll取消所有的异步请求
38.[函数,pfwHttp]
URLEncode/URLDecode/StringToUTF8/StringToUTF16/StringToGBK/StringToBig5/StringToANSI/UTF8ToString/UTF16ToString/GBKToString/Big5ToString/ANSIToString函数(封装调用n_httputility)
39.[函数,pfwHttp]
n_httpclient/n_httpresponse增加直接发送XML对象的接口,默认Content-Type为text/xml;utf-8
40.[函数,pfwParser]
ParseJSON/ParseXML
44.[函数,pfwUIObjects]
n_cst_splitcontainer_panel增加of_AttachObject函数,u_cst_splitcontainer增加of_TemplateAttach函数,用于绑定使用相对定位的对象,与of_BindObject的区别在于该函数绑定的对象不会改变容器的父子关系
42.[常量,pfwUIObjects]
u_cst_shortcutbar_theme增加CLR_SPLITBARBORDER
43.[想不起来了..]
[调整]
1.[pfwHttp]
n_httpclient的证书和密钥设置函数做了修改,删除了SetCertType/GetCertType函数
2.[pfwCrypto](!!!)
n_crypto对称加密与HMAC调整了算法(不兼容之前的版本),为跨语言(库)对称加密通讯提供可能(注:SymEncrypt/SymDecrypt仅支持PKCS5 PADDING)
3.[pfwUIControlsExt]
pfwUIControlsExt.pbl包里的控件不再根据操作系统版本设置微软雅黑字体,默认都为Arial
4.[pfwUI](!!!)
重新设计了颜色取值的机制,涉及所有OnGetColor/OnGetItemColor事件
[优化]
1.[pfwUIControls]
优化MDI窗口菜单快捷键
[修复]
1.[pfwUIControls]
PB9使用SplitContainer时编译后报R0025异常
2.[pfwUIControls]
s_cst_singlelineedit/s_cst_multilineedit/s_cst_editmask/s_cst_dropdownlist控件相关的BUG